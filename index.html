<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Sistema de Hor√°rios Escolares</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- jsPDF + AutoTable para gera√ß√£o de PDFs -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.8.4/jspdf.plugin.autotable.min.js"></script>

    <!-- XLSX para exportar em Excel -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>

    <!-- Chart.js para gr√°ficos -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="style.css">
</head>
<body>
<div class="container">
    <header>
        <div class="header-inner">
            <div class="header-text">
                <svg class="logo-visio"
                     viewBox="0 0 1920 180"
                     xmlns="http://www.w3.org/2000/svg">
                    <defs>
                        <linearGradient id="bgGradient" x1="0" y1="0" x2="1" y2="0">
                            <stop offset="0%" stop-color="#0B1D2A"/>
                            <stop offset="50%" stop-color="#123A5A"/>
                            <stop offset="100%" stop-color="#1F6FB2"/>
                        </linearGradient>
                        <linearGradient id="vGradient" x1="0" y1="0" x2="1" y2="1">
                            <stop offset="0%" stop-color="#6EC1FF"/>
                            <stop offset="100%" stop-color="#1F6FB2"/>
                        </linearGradient>
                    </defs>
                    <rect width="1920" height="180" fill="url(#bgGradient)"/>
                    <text x="120" y="110"
                          font-family="Poppins, Montserrat, Arial, sans-serif"
                          font-size="70"
                          font-weight="700"
                          fill="white">
                        <tspan fill="url(#vGradient)">V</tspan>isio
                    </text>
                    <text x="300" y="95"
                          font-family="Poppins, Montserrat, Arial, sans-serif"
                          font-size="40"
                          font-weight="600"
                          fill="white"
                          class="banner-subtitle">
                        Gest√£o Inteligente de Hor√°rios Escolares
                    </text>
                    <text x="300" y="130"
                          font-family="Poppins, Montserrat, Arial, sans-serif"
                          font-size="22"
                          font-weight="600"
                          fill="#DCEEFF"
                          class="banner-tagline">
                        Organize professores, turmas e turnos em poucos cliques.
                    </text>
                </svg>
            </div>
        </div>
    </header>

    <div id="loginCard" class="card login-card">
        <div class="login-header">
            <div class="login-icon">üîê</div>
            <h3>Acesso ao Sistema</h3>
            <p class="login-subtitle">Use o usu√°rio administrador da sua escola para entrar</p>
        </div>
        <form id="formLogin" class="form-grid">
            <div class="form-group">
                <label for="loginUsuario">Usu√°rio</label>
                <input type="text" id="loginUsuario" autocomplete="username" placeholder="ex.: admin-escola">
            </div>
            <div class="form-group">
                <label for="senhaUsuario">Senha</label>
                <input type="password" id="senhaUsuario" autocomplete="current-password" placeholder="Digite sua senha">
            </div>
            <div class="form-group full-row">
                <button type="submit" class="btn-primary">Entrar</button>
            </div>
        </form>
        <p class="hint" id="loginHint"></p>
    </div>

    <div class="main-content">
        <nav class="sidebar">
            <button class="menu-btn active" onclick="showSection('professores')">üë®‚Äçüè´ Professores</button>
            <button class="menu-btn" onclick="showSection('turmas')">üè´ Turmas / Cursos</button>
            <button class="menu-btn" onclick="showSection('horarios')">üìÖ Editor de Hor√°rios</button>
            <button class="menu-btn" onclick="showSection('relatorios')">üìÑ Relat√≥rios / PDFs</button>
            <button class="menu-btn" onclick="showSection('consultas')">üîé Consultas</button>
            <button class="menu-btn" onclick="sairSistema()">üö™ Sair</button>
        </nav>

        <main class="content">

            <!-- ================= PROFESSORES ================= -->
            <section id="professores" class="section active">
                <h2>Professores</h2>

                <div class="card">
                    <h3>Cadastrar / Editar Professor</h3>
                    <form id="formProfessor" class="form-grid">
                        <input type="hidden" id="professorId">
                        <div class="form-group">
                            <label for="nomeProfessor">Nome:</label>
                            <input type="text" id="nomeProfessor" required>
                        </div>
                        <div class="form-group">
                            <label for="disciplinasProfessor">
                                Disciplinas <span class="label-help">(separadas por v√≠rgula)</span>:
                            </label>
                            <input type="text" id="disciplinasProfessor" placeholder="Matem√°tica, F√≠sica, ...">
                        </div>
                        <div class="form-group">
                            <label for="corProfessor">Cor de identifica√ß√£o:</label>
                            <input type="color" id="corProfessor" value="#3498db">
                        </div>
                        <div class="form-group full-row">
                            <label>Disponibilidade por dia/turno:</label>
                            <div id="dispProfessor" class="disp-grid"></div>
                        </div>
                        <!-- tempos por dia/turno agora aparecem logo abaixo de cada dia dentro da pr√≥pria grade -->
                        <!-- se√ß√£o de tempos gerais removida; tempos s√£o definidos por dia/turno acima -->
                        <div class="form-group full-row">
                            <button type="submit" class="btn-primary">üíæ Salvar Professor</button>
                        </div>
                    </form>
                </div>

                <div class="card">
                    <h3>Lista de Professores</h3>
                    <table class="tabela-padrao">
                        <thead>
                        <tr>
                            <th>Nome</th>
                            <th>Disciplinas</th>
                            <th>Cor</th>
                            <th>A√ß√µes</th>
                        </tr>
                        </thead>
                        <tbody id="listaProfessores"></tbody>
                    </table>
                </div>
            </section>

            <!-- ================= TURMAS / CURSOS ================= -->
            <section id="turmas" class="section">
                <h2>Turmas e Cursos</h2>

                <div class="card">
                    <h3>Cadastrar / Editar Turma</h3>
                    <form id="formTurma" class="form-grid">
                        <input type="hidden" id="turmaId">
                        <div class="form-group">
                            <label for="nomeTurma">Nome da Turma:</label>
                            <input type="text" id="nomeTurma" placeholder="Ex.: INT. INFO. 2025 A" required>
                        </div>
                        <div class="form-group">
                            <label for="cursoTurma">Curso / √Årea de Atua√ß√£o:</label>
                            <div class="inline-group">
                                <select id="cursoTurma" required></select>
                                <button type="button" class="btn-secondary small" onclick="abrirModalCurso()" title="Adicionar novo curso">‚ûï</button>
                                <button type="button" class="btn-danger small" onclick="excluirCursoSelecionado()" title="Excluir curso selecionado">üóëÔ∏è</button>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Turno:</label>
                            <div class="chips-group" id="chips-turno-turma">
                                <button type="button" class="chip" data-value="MANHA"
                                        onclick="selecionarChip('chips-turno-turma','turnoTurma',this)">Manh√£</button>
                                <button type="button" class="chip" data-value="TARDE"
                                        onclick="selecionarChip('chips-turno-turma','turnoTurma',this)">Tarde</button>
                                <button type="button" class="chip" data-value="NOITE"
                                        onclick="selecionarChip('chips-turno-turma','turnoTurma',this)">Noite</button>
                            </div>
                            <input type="hidden" id="turnoTurma" required>
                        </div>
                        <div class="form-group">
                            <label for="descricaoTurma">Descri√ß√£o (opcional):</label>
                            <div class="inline-group">
                                <input type="text" id="descricaoTurma" placeholder="Ex.: VI Fase ‚Ä¢ 2025.2" style="flex: 1;">
                                <button type="submit" class="btn-primary">üíæ Salvar Turma</button>
                            </div>
                        </div>
                    </form>
                </div>

                <div class="card">
                    <h3>Turmas Cadastradas</h3>
                    <table class="tabela-padrao">
                        <thead>
                        <tr>
                            <th>Turma</th>
                            <th>Curso / √Årea</th>
                            <th>Descri√ß√£o</th>
                            <th>Turno</th>
                            <th>A√ß√µes</th>
                        </tr>
                        </thead>
                        <tbody id="listaTurmas"></tbody>
                    </table>
                </div>
            </section>

            <!-- ================= EDITOR DE HOR√ÅRIOS ================= -->
            <section id="horarios" class="section">
                <h2>Editor Visual de Hor√°rios</h2>

                <div class="card">
                    <h3>Lan√ßar Aula (Cadastro R√°pido)</h3>
                    <form id="formHorario" class="form-grid">
                        <input type="hidden" id="horarioId">

                        <div class="form-group">
                            <label>Turno:</label>
                            <div class="chips-group" id="chips-turno-horario">
                                <button type="button" class="chip" data-value="MANHA"
                                        onclick="selecionarChipTurnoHorario(this)">Manh√£</button>
                                <button type="button" class="chip" data-value="TARDE"
                                        onclick="selecionarChipTurnoHorario(this)">Tarde</button>
                                <button type="button" class="chip" data-value="NOITE"
                                        onclick="selecionarChipTurnoHorario(this)">Noite</button>
                            </div>
                            <input type="hidden" id="turnoHorario" required>
                        </div>

                        <div class="form-group">
                            <label>Dia da Semana:</label>
                            <div class="chips-group" id="chips-dia">
                                <button type="button" class="chip" data-value="SEGUNDA"
                                        onclick="selecionarChip('chips-dia','diaSemana',this)">Seg</button>
                                <button type="button" class="chip" data-value="TERCA"
                                        onclick="selecionarChip('chips-dia','diaSemana',this)">Ter</button>
                                <button type="button" class="chip" data-value="QUARTA"
                                        onclick="selecionarChip('chips-dia','diaSemana',this)">Qua</button>
                                <button type="button" class="chip" data-value="QUINTA"
                                        onclick="selecionarChip('chips-dia','diaSemana',this)">Qui</button>
                                <button type="button" class="chip" data-value="SEXTA"
                                        onclick="selecionarChip('chips-dia','diaSemana',this)">Sex</button>
                                <button type="button" class="chip" data-value="SABADO"
                                        onclick="selecionarChip('chips-dia','diaSemana',this)">S√°b</button>
                            </div>
                            <input type="hidden" id="diaSemana" required>
                        </div>

                        <div class="form-group">
                            <label>Turma:</label>
                            <div class="chips-group" id="chips-turma">
                                <!-- preenchido via JS -->
                            </div>
                            <input type="hidden" id="turmaHorario" required>
                        </div>

                        <div class="form-group">
                            <label>Hor√°rio (tempo):</label>
                            <div class="chips-group" id="chips-tempo">
                                <!-- tempos via JS -->
                            </div>
                            <input type="hidden" id="tempoHorario" required>
                            <span class="hint">Selecione <strong>um ou mais tempos</strong> para lan√ßar v√°rias aulas de uma vez.</span>
                            <div class="inline-group" style="margin-top:6px;">
                                <button type="button" class="btn-secondary small" onclick="abrirModalTempos()">‚öôÔ∏è Tempos do turno</button>
                            </div>
                        </div>

                        <div class="form-group full-row">
                            <div class="inline-group" style="align-items: flex-end; width: 100%;">
                                <div class="form-group" style="flex: 1;">
                                    <label for="professorHorario">Professor:</label>
                                    <select id="professorHorario">
                                        <option value="">Selecione...</option>
                                    </select>
                                </div>
                                <div class="form-group" style="flex: 1;">
                                    <label for="disciplinaHorario">Disciplina:</label>
                                    <input type="text" id="disciplinaHorario" required>
                                </div>
                                <div class="form-group" style="flex: 0 0 auto; margin-top: 0;">
                                    <button type="submit" class="btn-primary">üíæ Salvar Aula(s)</button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>

                <div class="card">
                    <h3>Editor Visual</h3>
                    <p id="editorTurnoHint" class="hint editor-turno-hint">
                        <label class="editor-hint-toggle">
                            <input type="checkbox" id="chkMostrarInstrucoesEditor">
                            <span class="editor-hint-icon" aria-hidden="true">üí°</span>
                            <span class="editor-hint-label">Instru√ß√µes</span>
                        </label>
                        <span id="editorTurnoHintText">
                            Arraste uma aula colorida para outra c√©lula vazia para copiar. Clique nas c√©lulas para editar ou adicionar. Use üß† Ajuste Inteligente e ‚Ü©Ô∏è Desfazer para reorganizar ou voltar.
                        </span>
                    </p>

                    <div class="filtros-grade">
                        <div class="filtros-grade-group">
                            <span>Modo de visualiza√ß√£o:</span>
                            <div class="chips-group" id="chips-modo-visual">
                                <button type="button" class="chip selecionado" data-value="TURNO"
                                        onclick="mudarModoVisual(this)">Por turno</button>
                                <button type="button" class="chip" data-value="CURSO"
                                        onclick="mudarModoVisual(this)">Por curso</button>
                            </div>
                        </div>
                        <div class="filtros-grade-group">
                            <span>Turno visualizado:</span>
                            <div class="chips-group" id="chips-turno-visual">
                                <button type="button" class="chip selecionado" data-value="MANHA"
                                        onclick="mudarTurnoVisual(this)">Manh√£</button>
                                <button type="button" class="chip" data-value="TARDE"
                                        onclick="mudarTurnoVisual(this)">Tarde</button>
                                <button type="button" class="chip" data-value="NOITE"
                                        onclick="mudarTurnoVisual(this)">Noite</button>
                            </div>
                        </div>
                        <div class="filtros-grade-group" id="filtro-curso-visual" style="display:none;">
                            <span>Curso:</span>
                            <select id="cursoVisual" onchange="mudarCursoVisual(this)">
                                <option value="">Todos os cursos</option>
                            </select>
                        </div>
                        <div class="filtros-grade-group">
                            <label style="display:inline-flex; align-items:center; gap:4px;">
                                <input type="checkbox" id="chkOmitirSabadoGrade" onclick="montarGradeTurno(turnoAtualGrade)">
                                Ocultar s√°bado
                            </label>
                        </div>
                    </div>

                    <div class="editor-actions">
                        <button type="button" class="btn-primary" onclick="ajusteInteligente()">üß† Ajuste Inteligente</button>
                        <button type="button" class="btn-secondary" onclick="desfazerAjuste()">‚Ü©Ô∏è Desfazer √∫ltimo ajuste</button>
                        <button type="button" class="btn-warning" onclick="exportarBackup()">üíæ Exportar Backup</button>
                        <input type="file" id="importBackup" accept=".json" style="display: none;" onchange="importarBackup(event)">
                        <button type="button" class="btn-secondary" onclick="document.getElementById('importBackup').click()">üìÇ Importar Backup</button>
                    </div>

                    <div class="grade-container">
                        <table class="grade-horarios" id="tabelaGrade">
                            <!-- preenchida via JS -->
                        </table>
                    </div>

                    <p class="hint">
                        <strong>Clique em qualquer c√©lula (vazia ou com aula) para editar.</strong><br>
                        Clique em uma c√©lula vazia para lan√ßar nova aula. Clique em uma aula para editar.
                    </p>
                </div>

                <div class="card">
                    <h3>Limpeza de Hor√°rios (Novo Semestre)</h3>
                    <div class="form-grid">
                        <div class="form-group full-row">
                            <label>Apagar hor√°rios da turma:</label>
                            <select id="turmaLimpeza">
                                <option value="">Selecione a turma...</option>
                            </select>
                            <button type="button" class="btn-warning" onclick="limparAulasTurma()">üóëÔ∏è Apagar da turma</button>
                        </div>
                        <div class="form-group full-row">
                            <label>Apagar por dia da semana:</label>
                            <div class="inline-group">
                                <select id="diaLimpeza">
                                    <option value="">Selecione o dia...</option>
                                    <option value="SEGUNDA">Segunda</option>
                                    <option value="TERCA">Ter√ßa</option>
                                    <option value="QUARTA">Quarta</option>
                                    <option value="QUINTA">Quinta</option>
                                    <option value="SEXTA">Sexta</option>
                                    <option value="SABADO">S√°bado</option>
                                </select>
                                <select id="turnoLimpeza">
                                    <option value="TODOS">Todos os turnos</option>
                                    <option value="MANHA">Manh√£</option>
                                    <option value="TARDE">Tarde</option>
                                    <option value="NOITE">Noite</option>
                                </select>
                            </div>
                            <button type="button" class="btn-warning" onclick="limparAulasDiaSemana()">üóëÔ∏è Apagar do dia</button>
                        </div>
                        <div class="form-group full-row">
                            <label>Apagar toda a tabela:</label>
                            <button type="button" class="btn-danger" onclick="limparTodasAulas()">üóëÔ∏è Apagar todos os hor√°rios</button>
                        </div>
                    </div>
                    <p class="hint">
                        Recomenda-se usar o bot√£o <strong>Exportar Backup</strong> acima, antes de apagar hor√°rios, para manter um hist√≥rico do semestre anterior.
                    </p>
                </div>

                <div class="card">
                    <h3>Configura√ß√£o de Tempos por Turno</h3>
                <div class="form-grid">
                        <div class="form-group">
                            <label>Turno:</label>
                            <div class="chips-group" id="chips-turno-tempos">
                                <button type="button" class="chip selecionado" data-value="MANHA" onclick="selecionarTurnoTempos(this)">Manh√£</button>
                                <button type="button" class="chip" data-value="TARDE" onclick="selecionarTurnoTempos(this)">Tarde</button>
                                <button type="button" class="chip" data-value="NOITE" onclick="selecionarTurnoTempos(this)">Noite</button>
                            </div>
                        </div>
                        <div class="form-group" style="grid-column: 1 / -1;">
                            <div class="table-wrapper">
                                <table class="tabela-padrao">
                                    <thead>
                                        <tr>
                                            <th>#</th>
                                            <th>Etiqueta</th>
                                            <th>In√≠cio</th>
                                            <th>Fim</th>
                                            <th>Intervalo</th>
                                            <th>A√ß√µes</th>
                                        </tr>
                                    </thead>
                                    <tbody id="temposConfigBody"></tbody>
                                </table>
                            </div>
                            <div class="inline-group" style="margin-top:8px;">
                                <button class="btn-secondary" type="button" onclick="adicionarTempoTurno()">Adicionar tempo</button>
                                <button class="btn-primary" type="button" onclick="salvarTemposTurno()">Salvar tempos do turno</button>
                            </div>
                            <p class="hint">Os IDs dos tempos s√£o por turno (1, 2, 3...). Ajuste etiqueta e hor√°rios conforme necess√°rio.</p>
                        </div>
                    </div>
                </div>
                
                <div id="modalTempos" class="modal">
                    <div class="modal-content modal-tempos">
                        <h3>Tempos por Turno</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Turno:</label>
                                <div class="chips-group" id="chips-turno-tempos-modal">
                                    <button type="button" class="chip selecionado" data-value="MANHA" onclick="selecionarTurnoTemposModal(this)">Manh√£</button>
                                    <button type="button" class="chip" data-value="TARDE" onclick="selecionarTurnoTemposModal(this)">Tarde</button>
                                    <button type="button" class="chip" data-value="NOITE" onclick="selecionarTurnoTemposModal(this)">Noite</button>
                                </div>
                            </div>
                            <div class="form-group" style="grid-column: 1 / -1;">
                                <div class="table-wrapper">
                                    <table class="tabela-padrao">
                                        <thead>
                                        <tr>
                                            <th>#</th>
                                            <th>Etiqueta</th>
                                            <th>In√≠cio</th>
                                            <th>Fim</th>
                                            <th>Intervalo</th>
                                            <th>A√ß√µes</th>
                                        </tr>
                                        </thead>
                                        <tbody id="temposConfigBodyModal"></tbody>
                                    </table>
                                </div>
                                <div class="inline-group" style="margin-top:8px;">
                                    <button class="btn-secondary" type="button" onclick="adicionarTempoTurnoModal()">Adicionar tempo</button>
                                    <button class="btn-primary" type="button" onclick="salvarTemposTurnoModal()">Salvar tempos do turno</button>
                                </div>
                            </div>
                        </div>
                        <div class="modal-actions">
                            <button type="button" class="btn-secondary" onclick="fecharModalTempos()">Fechar</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ================= RELAT√ìRIOS / PDFs ================= -->
            <section id="relatorios" class="section">
                <h2>Relat√≥rios e PDFs</h2>

                <div class="card">
                    <h3>Relat√≥rio por Turno</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Turno:</label>
                            <select id="turnoRelatorio">
                                <option value="MANHA">Manh√£</option>
                                <option value="TARDE">Tarde</option>
                                <option value="NOITE">Noite</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Formato do layout:</label>
                            <select id="layoutRelatorio">
                                <option value="compacto">Compacto</option>
                                <option value="colorido">Colorido por professor</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Op√ß√µes:</label>
                            <div class="inline-group">
                                <label><input type="checkbox" id="omitirSabadoRelatorios"> Omitir s√°bado</label>
                            </div>
                        </div>
                        <div class="form-group full-row">
                            <div class="inline-group">
                                <button class="btn-pdf" type="button" onclick="gerarRelatorioTurnoPDF()">üìÑ Gerar PDF do Turno</button>
                                <button class="btn-secondary" type="button" onclick="gerarRelatorioTurnoXLS()">üìä Exportar XLS do Turno</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3>Relat√≥rio por Curso</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Curso / √Årea:</label>
                            <select id="cursoRelatorio">
                                <!-- preenchido via JS -->
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Turno:</label>
                            <select id="turnoRelatorioCurso">
                                <option value="MANHA">Manh√£</option>
                                <option value="TARDE">Tarde</option>
                                <option value="NOITE">Noite</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Formato do layout:</label>
                            <select id="layoutRelatorioCurso">
                                <option value="compacto">Compacto</option>
                                <option value="colorido">Colorido por professor</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Op√ß√µes:</label>
                            <div class="inline-group">
                                <label><input type="checkbox" id="omitirSabadoRelatorioCurso"> Omitir s√°bado</label>
                            </div>
                        </div>
                        <div class="form-group full-row">
                            <div class="inline-group">
                                <button class="btn-pdf" type="button" onclick="gerarRelatorioCursoPDF()">üìÑ Gerar PDF do Curso</button>
                                <button class="btn-secondary" type="button" onclick="gerarRelatorioCursoXLS()">üìä Exportar XLS do Curso</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3>Relat√≥rio por Professor</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Professor:</label>
                            <select id="professorRelatorio">
                                <option value="">Selecione...</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label><input type="checkbox" id="profRelatorioMostrarGraficos" checked> Mostrar gr√°ficos</label>
                        </div>
                        <div class="form-group">
                            <label><input type="checkbox" id="profRelatorioMostrarVagos" checked> Mostrar ‚ÄúTempo vago na escola‚Äù</label>
                        </div>
                        <div class="form-group">
                            <button class="btn-primary" type="button" onclick="gerarTabelaProfessor()">üìä Gerar Tabela</button>
                        </div>
                        <div class="form-group">
                            <button class="btn-pdf" type="button" onclick="gerarRelatorioProfessorPDF()">üìÑ Gerar PDF do Professor</button>
                        </div>
                        <div class="form-group">
                            <button class="btn-secondary" type="button" onclick="preverImpressaoProfessor()">üñ®Ô∏è Pr√©-visualizar impress√£o</button>
                        </div>
                    </div>
                    <p id="tabelaProfessorTitulo" class="hint" style="margin: 8px 0 4px 0; font-weight: 600;"></p>
                    <div class="table-wrapper">
                        <table class="tabela-padrao" id="tabelaProfessor">
                            <thead>
                            <tr>
                                <th>Dia</th>
                                <th>Turno</th>
                                <th>Hor√°rio</th>
                                <th>Tempo</th>
                                <th>Turma</th>
                                <th>Disciplina</th>
                            </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                    <p class="hint" id="profTempoVagoHint">
                        Os intervalos em que o professor est√° na escola mas sem aula aparecem como
                        <strong>Tempo vago na escola</strong>.
                    </p>
                    <div class="prof-charts">
                        <div class="chart-card">
                            <h4>Carga por dia da semana</h4>
                            <canvas id="chartProfDiasSemana"></canvas>
                            <p id="chartProfDiasResumo" class="hint"></p>
                        </div>
                        <div class="chart-card">
                            <h4>Carga por turno</h4>
                            <canvas id="chartProfTurnos"></canvas>
                            <p id="chartProfTurnosResumo" class="hint"></p>
                        </div>
                        <div class="chart-card">
                            <h4>Carga mensal por dia da semana</h4>
                            <canvas id="chartProfDiasMes"></canvas>
                            <p id="chartProfDiasMesResumo" class="hint"></p>
                        </div>
                    </div>
                </div>
                
                <!-- card removido: filtros movidos para cadastro do Professor -->
            </section>

            <!-- ================= CONSULTAS AVAN√áADAS ================= -->
            <section id="consultas" class="section">
                <h2>Consultas Avan√ßadas</h2>

                <div class="card">
                    <h3>Filtros de Consulta</h3>
                    <div class="form-grid">
                        <div class="form-group full-row">
                            <div class="inline-group" style="align-items: flex-end; width: 100%;">
                                <div class="form-group" style="flex: 1;">
                                    <label for="tipoConsulta">Tipo de consulta:</label>
                                    <select id="tipoConsulta">
                                        <option value="professores">Professores</option>
                                        <option value="turmas">Turmas</option>
                                        <option value="turnos">Turnos</option>
                                        <option value="cursos">Cursos / √Åreas</option>
                                    </select>
                                </div>
                                <div class="form-group" style="flex: 0 0 auto; margin-top: 0;">
                                    <button class="btn-primary" type="button" onclick="gerarConsulta()">üîé Gerar Consulta</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h3>Resultado</h3>
                    <div class="table-wrapper">
                        <table class="tabela-padrao" id="tabelaConsulta">
                            <thead></thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </section>

        </main>
    </div>
</div>

<!-- Modal Novo Curso -->
<div id="modalCurso" class="modal">
    <div class="modal-content">
        <h3>Novo Curso / √Årea</h3>
        <form id="formNovoCurso">
            <div class="form-group">
                <label for="nomeNovoCurso">Nome do curso/√°rea:</label>
                <input type="text" id="nomeNovoCurso" required>
            </div>
            <div class="modal-actions">
                <button type="button" class="btn-secondary" onclick="fecharModalCurso()">Cancelar</button>
                <button type="submit" class="btn-primary">Salvar</button>
            </div>
        </form>
    </div>
</div>

<!-- Modal de edi√ß√£o de aula -->
<div id="modalAula" class="modal">
    <div class="modal-content modal-aula">
        <h3>Editar Aula</h3>
        <form id="formModalAula" class="form-grid">
            <input type="hidden" id="modalAulaId">
            <div class="form-group">
                <label>Turma:</label>
                <input type="text" id="modalTurma" readonly>
            </div>
            <div class="form-group">
                <label>Dia:</label>
                <input type="text" id="modalDia" readonly>
            </div>
            <div class="form-group">
                <label>Hor√°rio:</label>
                <input type="text" id="modalHorario" readonly>
            </div>
            <div class="form-group">
                <label for="modalDisciplina">Disciplina:</label>
                <input type="text" id="modalDisciplina">
            </div>
            <div class="form-group">
                <label for="modalProfessor">Professor:</label>
                <select id="modalProfessor">
                    <option value="">Selecione...</option>
                </select>
            </div>
            <div class="form-group modal-aula-actions">
                <button type="button" class="btn-danger" id="btnExcluirAulaModal">Excluir aula</button>
                <button type="submit" class="btn-primary">Salvar altera√ß√µes</button>
            </div>
        </form>
    </div>
</div>

<!-- Modal de edi√ß√£o de Professor -->
<div id="modalProfessorPerfil" class="modal">
    <div class="modal-content modal-prof">
        <h3>Editar Professor</h3>
        <form id="formModalProfessor" class="form-grid">
            <input type="hidden" id="modalProfessorId">
            <div class="form-group">
                <label>Nome</label>
                <input type="text" id="modalProfNome" required>
            </div>
            <div class="form-group">
                <label>Disciplinas (v√≠rgula)</label>
                <input type="text" id="modalProfDisciplinas" placeholder="Matem√°tica, F√≠sica, ...">
            </div>
            <div class="form-group">
                <label>Cor</label>
                <input type="color" id="modalProfCor" value="#3498db">
            </div>
            <div class="form-group full-row">
                <label>Disponibilidade por dia/turno</label>
                <div id="modalDispProfessor" class="disp-grid"></div>
            </div>
            <div class="modal-actions">
                <button type="button" class="btn-secondary" onclick="fecharModalProfessor()">Cancelar</button>
                <button type="submit" class="btn-primary">Salvar</button>
            </div>
        </form>
    </div>
</div>

<script src="script.js"></script>
</body>
</html>
